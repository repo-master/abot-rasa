version: '3.1'

intents:
- change_aggregation:
    use_entities:
    - metric
    - location
    - aggregation
- change_location:
    use_entities:
    - metric
    - location
    - aggregation
- change_sensor:
    use_entities:
    - metric
    - location
    - aggregation
- change_time_period
- query_metric_aggregate:
    use_entities:
    - metric
    - location
    - aggregation
- summarize_sensor_data:
    use_entities:
    - metric
- query_sensor_list

entities:
- metric
- aggregation
- latest_period
- location


slots:
  metric:
    type: text
    mappings:
    - type: from_entity
      entity: metric
  aggregation:
    type: text
    mappings:
    - type: from_entity
      entity: aggregation
  location:
    type: text
    mappings:
    - type: from_entity
      entity: location
  # Timestamp for aggregation. Either ISO8601 string of entered time,
  # or a dict of {'from': '...', 'to': '...'} for range.
  timestamp_agg_period:
    type: text
    mappings:
    - type: from_entity
      entity: time

  timestamp_agg_timerange:
    type: any
    mappings:
    - type: custom

forms:
  form_metric_data:
    required_slots:
    - metric
    - location

actions:
- action_metric_aggregate
- action_metric_summarize
- action_fetch_report
- action_show_sensor_list

responses:
  # Uttered by form_metric_data automatically when an entity is missing.
  utter_ask_metric:
  - text: Which Sensor are you looking for?
  utter_ask_location:
  - text: Ok, which location where you are looking for this data
  utter_ask_timestamp_agg_period :
  - text : Please Specify time period
  utter_ask_aggregation:
  - text : What type of aggregation type should be done?
